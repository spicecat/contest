{"version":3,"sources":["components/DialogForm.jsx","components/Logout.jsx","services/schemas.js","components/Navbar.jsx","services/submit.js","containers/Submit.jsx","App.jsx","index.js","services/userService.js","var.js"],"names":["DialogForm","name","action","schema","useState","open","setOpen","fields","Object","keys","formik","useFormik","initialValues","reduce","o","i","validationSchema","onSubmit","values","a","Button","color","variant","onClick","Dialog","keepMounted","onClose","DialogTitle","handleSubmit","DialogContent","map","field","TextField","fullWidth","id","label","upperFirst","replaceAll","value","onChange","handleChange","error","Boolean","touched","errors","helperText","DialogActions","type","Logout","logout","registerSchema","object","username","string","required","min","password","confirm_password","oneOf","ref","loginSchema","cookies","Cookies","useStyles","makeStyles","theme","menuButton","marginRight","spacing","userControl","marginLeft","Navbar","page","classes","AppBar","position","Toolbar","IconButton","className","Typography","get","register","login","baseUrl","serverUrl","files","url","text","data","token","contest","problem","lang","program","superagent","post","response","console","log","Submit","file","setFile","event","target","upload","App","ReactDOM","render","document","getElementById","user","body","set","base64String","Buffer","from","toString","headers","Authorization","remove"],"mappings":"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","file":"static/js/main.e180cce4.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport { upperFirst } from 'lodash/string'\nimport { useFormik } from 'formik'\nimport { Button, Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@material-ui/core'\n\nexport default function DialogForm({ name, action, schema }) {\n    const [open, setOpen] = useState(false)\n    const fields = Object.keys(schema.fields)\n    const formik = useFormik({\n        initialValues: fields.reduce((o, i) => ({ ...o, [i]: \"\" }), {}),\n        validationSchema: schema,\n        onSubmit: async values => { if (await action(values)) setOpen(false) }\n    })\n\n    return (\n        <>\n            <Button color='inherit' variant='outlined' onClick={() => setOpen(true)}>{name}</Button>\n            <Dialog open={open} keepMounted onClose={() => setOpen(false)}>\n                <DialogTitle>{name}</DialogTitle>\n                <form onSubmit={formik.handleSubmit}>\n                    <DialogContent>\n                        {fields.map(field =>\n                            <TextField\n                                key={field}\n                                fullWidth\n                                id={field}\n                                name={field}\n                                label={upperFirst(field.replaceAll('_', ' '))}\n                                value={formik.values[field]}\n                                onChange={formik.handleChange}\n                                error={Boolean(formik.touched[field] && formik.errors[field])}\n                                helperText={formik.touched[field] && formik.errors[field]}\n                            />\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button type='submit' color='primary' >{name}</Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </>\n    )\n}","import React from 'react'\nimport { Button } from '@material-ui/core'\n\nimport { logout } from '../services/userService'\n\nexport default function Logout() {\n    return (\n        <Button color='inherit' variant='outlined' onClick={logout}>Logout</Button>\n    )\n}","import { object, string, ref } from 'yup'\n\nexport const registerSchema = object({\n    username: string()\n        .required('Username is required')\n        .min(4, 'Username should be of minimum 4 characters length'),\n    password: string()\n        .min(8, 'Password should be of minimum 8 characters length')\n        .required('Password is required'),\n    confirm_password: string()\n        .oneOf([ref('password'), null], 'Passwords must match')\n        .required('Password is required')\n})\n\nexport const loginSchema = object({\n    username: string().required('Username is required'),\n    password: string().required('Password is required')\n})","import React from 'react'\nimport Cookies from 'universal-cookie'\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar, Toolbar, Typography, IconButton } from '@material-ui/core'\nimport MenuIcon from '@material-ui/icons/Menu'\n\nimport DialogForm from './DialogForm'\nimport Logout from './Logout'\n\nimport { register, login } from '../services/userService'\nimport { registerSchema, loginSchema } from '../services/schemas'\n\nconst cookies = new Cookies()\n\nconst useStyles = makeStyles(theme => ({\n    menuButton: { marginRight: theme.spacing(2), },\n    userControl: { marginLeft: 'auto' }\n}))\n\nexport default function Navbar({ page }) {\n    const classes = useStyles()\n\n    return (\n        <AppBar position='static'>\n            <Toolbar variant='dense'>\n                <IconButton color='inherit' className={classes.menuButton}>\n                    <MenuIcon />\n                </IconButton>\n                <Typography>\n                    {page}\n                </Typography>\n                <div className={classes.userControl}>\n                    {cookies.get('username') ?\n                        <Logout /> :\n                        <>\n                            <DialogForm name='Register' action={register} schema={registerSchema} />\n                            &nbsp;\n                            <DialogForm name='Login' action={login} schema={loginSchema} />\n                        </>}\n                </div>\n            </Toolbar>\n        </AppBar >\n\n    )\n}","import superagent from 'superagent'\n\nimport { serverUrl } from '../var.js'\n\nconst baseUrl = serverUrl\n\nexport async function upload(files) {\n    const url = baseUrl + '/submit'\n    try {\n        const data = { username: 'user1', token: 'token1', contest: 'con1', problem: 'prob1', lang: files.type, program: await files.text() }\n        const response = await superagent.post(url, data)\n        console.log('res:', response)\n        return response\n    } catch (err) { console.log('Error uploading files') }\n}","import React, { useState } from 'react'\nimport { upload } from '../services/submit.js'\nexport default function Submit() {\n    const [file, setFile] = useState()\n\n    function handleFile(event) {\n        setFile(event.target.files[0])\n    }\n    function handleSubmit() {\n        upload(file)\n    }\n\n    return (\n        <>\n            <input type=\"file\" name=\"files[]\" onChange={handleFile} />\n            <button onClick={handleSubmit}>Submit</button>\n        </>\n    )\n}","import React from 'react'\n\nimport './styles/App.css'\nimport Navbar from './components/Navbar'\nimport Submit from './containers/Submit'\n\nexport default function App() {\n  return (\n    <>\n      <Navbar page='Submit' />\n      <Submit />\n    </>\n  )\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)","import superagent from 'superagent'\nimport Cookies from 'universal-cookie'\n\nimport { serverUrl } from '../var.js'\n\nconst baseUrl = serverUrl + '/user'\nconst cookies = new Cookies()\n\nexport const register = async user => {\n    const url = baseUrl + '/register'\n    console.log(url, user) // remove\n    try {\n        const response = await superagent.post(url, user) // encrypt password before sending?\n        const { token } = response.body\n        cookies.set('token', token)\n        console.log('token', token) // remove\n        return true\n    } catch (err) { console.log('error', err) } // remove\n}\n\nexport const login = async user => {\n    const url = baseUrl + '/login'\n    const { username, password } = user\n    const base64String = Buffer.from(`${username}:${password}`, 'ascii').toString('base64')\n    console.log(user, base64String)\n    const headers = { Authorization: `Basic ${base64String}` }\n    try {\n        const response = await superagent.post(url, username).set(headers)\n        const { token } = response.body\n        cookies.set('token', token)\n        cookies.set('username', username)\n        console.log('token', token) // remove\n        return true\n    } catch (err) { console.log('error', err) } // remove\n}\n\nexport const logout = () => {\n    cookies.remove('username')\n    cookies.remove('token')\n}","export const serverUrl = 'http://localhost:7789' //'https://server.exozy.me'"],"sourceRoot":""}